<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>舌焚錄 - 主页</title>

    <style>
        /* --- 定义动画 (保持不变) --- */
        @keyframes noise-anim { 0% { background-position: 0 0; } 10% { background-position: -5% -10%; } 20% { background-position: -15% 5%; } 30% { background-position: 7% -25%; } 40% { background-position: 20% 25%; } 50% { background-position: -25% 10%; } 60% { background-position: 15% 5%; } 70% { background-position: 0% 15%; } 80% { background-position: 25% 35%; } 90% { background-position: -10% 10%; } 100% { background-position: 0 0; } }
        @keyframes vertical-lines-flow { 0% { background-position: 0 0; } 100% { background-position: 0 100%; } }
        @keyframes scan-glow { 0%, 100% { opacity: 0.05; } 20% { opacity: 0.15; } 40% { opacity: 0.08; } 60% { opacity: 0.2; } 80% { opacity: 0.05; } }
        @keyframes subtle-glitch-color { 0%, 100% { filter: hue-rotate(0deg) brightness(1); } 25% { filter: hue-rotate(5deg) brightness(0.95); } 50% { filter: hue-rotate(-3deg) brightness(1.05); } 75% { filter: hue-rotate(2deg) brightness(0.98); } }
        @keyframes modal-fade-in { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        @keyframes error-wiggle { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 50% { transform: translateX(5px); } 75% { transform: translateX(-3px); } }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        @keyframes text-flicker { 0%, 100% { opacity: 0.3; filter: blur(0.5px); } 15% { opacity: 0.08; filter: blur(0px); } 30% { opacity: 0.03; } 45% { opacity: 0.09; filter: blur(0.2px); } 60% { opacity: 0.01; } 75% { opacity: 0.07; filter: blur(0px); } 90% { opacity: 0.01; } }
        @keyframes subtle-drift { 0% { transform: translate(0px, 0px); } 25% { transform: translate(2px, -1px); } 50% { transform: translate(-1px, 2px); } 75% { transform: translate(-2px, -2px); } 100% { transform: translate(1px, 1px); } }

        /* --- 基础 Body 样式 (保持不变) --- */
        body { background-color: #1a0000; background-image: radial-gradient(ellipse at center, rgba(50, 0, 0, 0.2) 0%, rgba(10, 0, 0, 0.95) 100%); background-size: cover; background-position: center center; background-attachment: fixed; color: #e0d0d0; margin: 0; padding-bottom: 50px; font-family: 'KaiTi', 'SimSun', serif; line-height: 1.6; position: relative; overflow-x: hidden; }

        /* --- 背景伪元素 (保持不变) --- */
        body::before { content: ""; position: fixed; top: 0; left: 0; right: 0; bottom: 0; width: 100%; height: 100%; pointer-events: none; background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAABdElEQVR42u2aQQ7CMAwE7+HG8Qv58C/Q4gc4uTk68kISIpWCaukQgjz7k1NKQHwA8G0AiyFlVVVtJRCLJEne/0cAYOXTRERtSkBsykkAZg1qOL7HAGR+J0qp2QDkWcitAFmjGubvLgBkWzXqVABZj0Y9MgC7/xTcnQAkz7tXaGuNBw7IhkHZMAqbBmTDIGxYhA2DsAobDsGmWdBpBDYNyoZR2LQBGwZhw4pYNAjTYgWbDME2bMIGYfs+rDhpAqZhw4YkAwPZwQDswl4vHAPzxwDkGvV1cABZeFARxwDkjLq+VgBkS0MvFwA5z8GVCwBWmtnQjAYggzYws6kFYMymJtRgH6AqLpv65gfgQ+M14jxwAZbQy4ABkHGqPQBHr0M+g9MAJLfGKdYAZETcYh1ADLiJdQCMiZnUAWLENesAMiHmqALEiHvUAcSImFQBYkRcSgBiJL7EAKSEX9IAZCR+xgBkRFTCAGQEV2EAMkJs9G0AUqrO+wfpe/+5Zfxqf8AZfAZAAAAAElFTkSuQmCC') repeat; background-size: 70px 70px; opacity: 0.03; animation: noise-anim 1.5s steps(4) infinite; z-index: -1; }
        body::after { content: ""; position: fixed; top: 0; left: 0; right: 0; bottom: 0; width: 100%; height: 100%; pointer-events: none; background: linear-gradient(to bottom, rgba(10, 0, 0, 0.05) 0%, transparent 5%, transparent 95%, rgba(10, 0, 0, 0.1) 100%), linear-gradient(to bottom, rgba(255, 0, 0, 0.01), rgba(255, 0, 0, 0.03) 50%, rgba(255, 0, 0, 0.01)); background-size: 100% 3px, 100% 100%; opacity: 0.6; animation: vertical-lines-flow 30s linear infinite, scan-glow 5s ease-in-out infinite; z-index: -1; }

        /* --- 诅咒文字背景 (保持不变) --- */
        #cursed-text-background { position: fixed; inset: 0; width: 100%; height: 100%; overflow: hidden; pointer-events: none; z-index: 0; }
        .cursed-text { position: absolute; color: #501010; font-family: 'KaiTi', 'SimSun', serif; opacity: 0.05; white-space: nowrap; user-select: none; animation: text-flicker 6s infinite alternate, subtle-drift 15s infinite alternate ease-in-out; text-shadow: 0 0 3px rgba(232, 0, 0, 0.5); writing-mode: vertical-rl; text-orientation: mixed; }

        /* --- 内容容器 (保持不变) --- */
        .content-wrapper { padding: 40px 20px; position: relative; z-index: 1; max-width: 900px; margin: 0 auto; }

        /* --- 头部、主要内容、曝光栏、页脚、按钮等样式 (保持不变) --- */
        .header-content { text-align: center; margin-bottom: 60px; }
        .header-content h1 { color: #ffcccc; padding-bottom: 15px; margin-bottom: 10px; text-shadow: 0 0 15px rgba(255, 0, 0, 0.7), 0 0 5px rgba(255, 100, 100, 0.5); font-size: 3.8em; letter-spacing: 4px; position: relative; display: inline-block; font-family: 'SimHei', 'FangSong', sans-serif; }
        .header-content h1::after { content: ''; position: absolute; left: 50%; transform: translateX(-50%); bottom: -5px; width: 80%; height: 2px; background: linear-gradient(to right, transparent, rgba(255, 0, 0, 0.8), transparent); box-shadow: 0 0 10px rgba(255, 0, 0, 0.6); }
        .header-content p { color: #a09090; font-size: 1.1em; margin-top: 10px; margin-bottom: 0; line-height: 1.8; max-width: 600px; margin-left: auto; margin-right: auto; text-shadow: 0 0 4px rgba(0, 0, 0, 0.8); }
        .main-content { text-align: center; margin-bottom: 40px; }
        .main-content h2 { color: #ff5050; border: none; padding-bottom: 5px; margin-top: 0; margin-bottom: 35px; text-shadow: 0 0 12px rgba(255, 0, 0, 0.6); font-size: 2.2em; letter-spacing: 2px; font-family: 'FangSong', 'KaiTi', serif; }
        .gallery { display: flex; justify-content: center; gap: 40px; margin-bottom: 40px; flex-wrap: wrap; padding: 20px 0; }
        .exposed-name { display: flex; flex-direction: column; align-items: center; color: #ff4444; font-size: 1.8em; font-family: 'KaiTi', 'FangSong', serif; line-height: 1.3; text-shadow: 0 0 6px rgba(255, 0, 0, 0.5); writing-mode: vertical-rl; text-orientation: mixed; white-space: nowrap; cursor: pointer; transition: color 0.3s ease, text-shadow 0.3s ease; }
        .exposed-name:hover { color: #ff8080; text-shadow: 0 0 12px rgba(255, 0, 0, 0.8); }
        .contact-footer { position: fixed; bottom: 0; left: 0; right: 0; width: 100%; text-align: center; color: #776666; font-size: 0.9em; font-family: 'SimSun', serif; padding: 8px 0; background-color: rgba(10, 0, 0, 0.8); z-index: 998; letter-spacing: 1px; }
        .top-right-buttons { position: fixed; top: 15px; right: 20px; z-index: 1000; display: flex; gap: 10px; }
        .top-right-button { background-color: rgba(50, 0, 0, 0.8); color: #ff8080; border: 1px solid rgba(255, 80, 80, 0.5); padding: 8px 18px; font-family: 'Courier New', Courier, monospace; font-size: 14px; cursor: pointer; border-radius: 4px; text-transform: uppercase; letter-spacing: 1px; box-shadow: 0 0 10px rgba(255, 0, 0, 0.4); transition: background-color 0.3s ease, color 0.3s ease, box-shadow 0.3s ease; }
        .top-right-button:hover { background-color: rgba(255, 80, 80, 0.3); color: #ffffff; box-shadow: 0 0 18px rgba(255, 0, 0, 0.7); }

        /* --- 通用模态窗口样式 (保持不变) --- */
        .modal { display: none; position: fixed; inset: 0; background-color: rgba(15, 0, 0, 0.9); z-index: 1001; justify-content: center; align-items: center; padding: 20px; animation: modal-fade-in 0.3s ease forwards; overflow-y: auto; /* 允许模态框本身在内容过多时滚动 */ }
        .modal-content { background-color: #1a0505; padding: 35px 45px; border-radius: 8px; position: relative; color: #e0d0d0; width: 100%; max-width: 480px; /* Login/Register */ text-align: center; font-family: 'KaiTi', 'SimSun', serif; border: 1px solid rgba(255, 80, 80, 0.4); box-shadow: 0 5px 30px rgba(255, 0, 0, 0.3); margin: auto; }
        .modal-content h2 { color: #ff5050; text-shadow: 0 0 10px rgba(255, 80, 80, 0.5); margin-top: 0; margin-bottom: 30px; font-size: 1.8em; letter-spacing: 1.5px; font-family: 'FangSong', 'KaiTi', serif; }
        /* ... (登录/注册/公告模态框内元素样式保持不变) ... */
        .modal-content label { display: block; text-align: left; margin-bottom: 8px; color: #a09090; font-size: 0.95em; }
        .modal-content input[type="text"], .modal-content input[type="password"], .modal-content input[type="email"] { width: calc(100% - 26px); padding: 12px 13px; margin-bottom: 22px; background-color: rgba(50, 10, 10, 0.8); border-radius: 5px; color: #e0d0d0; font-size: 1em; transition: border-color 0.3s ease, box-shadow 0.3s ease; border: 1px solid rgba(255, 80, 80, 0.4); }
        .modal-content input:focus { outline: none; border-color: #ff5050; box-shadow: 0 0 10px rgba(255, 80, 80, 0.6); }
        .modal-buttons { display: flex; justify-content: space-between; gap: 15px; margin-top: 15px; }
        .modal-buttons button { flex-grow: 1; padding: 12px 15px; border: none; border-radius: 5px; cursor: pointer; font-size: 1em; transition: background-color 0.3s ease, color 0.3s ease, box-shadow 0.3s ease, opacity 0.3s ease; font-family: 'Courier New', Courier, monospace; text-transform: uppercase; letter-spacing: 1px; position: relative; }
        .modal-buttons button.primary { background-color: #c00000; color: #f0e0e0; }
        .modal-buttons button.primary:hover:not(:disabled) { background-color: #ff3030; box-shadow: 0 0 12px rgba(255, 80, 80, 0.7); }
        .modal-buttons button.secondary { background-color: transparent; color: #ff5050; border: 1px solid rgba(255, 80, 80, 0.5); }
        .modal-buttons button.secondary:hover { background-color: rgba(255, 80, 80, 0.15); color: #ffffff; border-color: #ff5050; }
        .modal-buttons button.loading::after { content: ''; display: block; position: absolute; top: 50%; left: 50%; width: 18px; height: 18px; margin-top: -9px; margin-left: -9px; border-radius: 50%; border: 2px solid rgba(255, 255, 255, 0.3); border-top-color: #fff; animation: spin 1s linear infinite; }
        .modal-buttons button.loading { opacity: 0.7; pointer-events: none; }
        .close-modal-button { position: absolute; top: 10px; right: 12px; background: none; border: none; color: #888; font-size: 28px; cursor: pointer; line-height: 1; padding: 5px; transition: color 0.3s ease; z-index: 10; }
        .close-modal-button:hover { color: #ff5050; }
        .error-message { display: none; background-color: rgba(255, 80, 80, 0.15); color: #ffcccc; border: 1px solid rgba(255, 80, 80, 0.5); padding: 12px 15px; margin-top: 20px; border-radius: 5px; text-align: left; font-size: 0.95em; animation: error-wiggle 0.4s ease; position: relative; padding-left: 40px; }
        .error-message::before { content: '!'; position: absolute; left: 10px; top: 50%; transform: translateY(-50%); font-weight: bold; font-size: 1.5em; color: #ff5050; background-color: #1a0505; border-radius: 50%; width: 24px; height: 24px; line-height: 24px; text-align: center; box-shadow: 0 0 5px rgba(255, 80, 80, 0.5); }
        .modal-announcements .modal-content { max-width: 600px; text-align: left; }
        .announcements-list { margin-top: 20px; max-height: 45vh; /* 保持最大高度 */ overflow-y: auto; /* 公告列表单独滚动 */ padding-right: 15px; border-top: 1px solid rgba(255, 80, 80, 0.2); padding-top: 20px; scrollbar-width: thin; scrollbar-color: rgba(255, 80, 80, 0.4) rgba(50, 10, 10, 0.5); }
        .announcements-list::-webkit-scrollbar { width: 8px; }
        .announcements-list::-webkit-scrollbar-track { background: rgba(50, 10, 10, 0.5); border-radius: 4px; }
        .announcements-list::-webkit-scrollbar-thumb { background-color: rgba(255, 80, 80, 0.4); border-radius: 4px; border: 1px solid rgba(255, 80, 80, 0.6); }
        .announcements-list::-webkit-scrollbar-thumb:hover { background-color: rgba(255, 80, 80, 0.6); }
        .announcement-item { margin-bottom: 25px; padding-bottom: 15px; border-bottom: 1px dashed rgba(255, 80, 80, 0.2); }
        .announcement-item:last-child { margin-bottom: 0; border-bottom: none; }
        .announcement-date { display: block; font-size: 0.9em; color: #ff8080; margin-bottom: 8px; font-family: 'Courier New', Courier, monospace; }
        .announcement-text { font-size: 1em; color: #c0a0a0; line-height: 1.7; margin: 0; }

        /* --- 罪证详情模态窗口特定样式 (优化滚动条) --- */
        .modal-details .modal-content {
            max-width: 750px;
            text-align: left;
            display: flex; /* 使用 Flexbox 布局 */
            flex-direction: column; /* 垂直排列子元素 */
            max-height: 85vh; /* 限制模态框最大高度 */
            overflow-y: auto; /* 当内容超出时，仅此容器出现滚动条 */
            scrollbar-width: thin;
            scrollbar-color: rgba(255, 80, 80, 0.5) rgba(10, 0, 0, 0.7);
        }
        .modal-details .modal-content::-webkit-scrollbar {
            width: 10px;
        }
        .modal-details .modal-content::-webkit-scrollbar-track {
            background: rgba(10, 0, 0, 0.7);
            border-radius: 5px;
        }
        .modal-details .modal-content::-webkit-scrollbar-thumb {
            background-color: rgba(255, 80, 80, 0.5);
            border-radius: 5px;
            border: 1px solid rgba(255, 80, 80, 0.7);
        }
        .modal-details .modal-content::-webkit-scrollbar-thumb:hover {
             background-color: rgba(255, 80, 80, 0.7);
        }

        /* 子元素不再需要独立滚动 */
        .details-content {
            background-color: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 80, 80, 0.2);
            padding: 20px;
            margin-top: 25px;
            margin-bottom: 15px; /* 调整间距 */
            border-radius: 4px;
            color: #c0a0a0;
            font-size: 1em;
            line-height: 1.8;
            white-space: pre-wrap; /* 保留换行 */
            /* 移除 overflow-y 和 max-height */
            flex-shrink: 0; /* 防止在 flex 容器中被压缩 */
        }

        .contact-info-container {
            padding: 0 20px;
            margin-bottom: 15px;
            flex-shrink: 0; /* 防止被压缩 */
        }
        .contact-info-line { margin-bottom: 5px; font-size: 1em; color: #c0a0a0; }
        .contact-info-line:last-child { margin-bottom: 0; }
        .contact-info-label { color: #a09090; margin-right: 8px; display: inline-block; min-width: 60px; }
        .blurred-login-required { display: inline-block; padding: 4px 10px; border: 1px dashed rgba(255, 80, 80, 0.3); border-radius: 4px; background-color: rgba(255, 80, 80, 0.05); color: transparent; filter: blur(3px); cursor: pointer; position: relative; transition: filter 0.2s ease, border-color 0.2s ease, background-color 0.2s ease; user-select: none; font-style: italic; vertical-align: middle; }
        .blurred-login-required::before { content: '登录后可见'; color: rgba(255, 80, 80, 0.3); font-style: italic; }
        .blurred-login-required:hover { filter: blur(0); border: 1px solid #ff5050; background-color: rgba(10, 0, 0, 0.7); color: transparent; }
        .blurred-login-required:hover::before { content: attr(data-hover-text); color: #ff5050; font-style: normal; font-weight: bold; }

        .details-image-container {
            text-align: center;
            margin-top: 10px; /* 调整间距 */
            margin-bottom: 25px;
            min-height: 150px;
            background-color: rgba(0, 0, 0, 0.1);
            padding: 10px;
            border-radius: 4px;
            border: 1px solid rgba(255, 80, 80, 0.1);
            flex-shrink: 0; /* 防止被压缩 */
        }
        .details-image-container img { max-width: 100%; max-height: 30vh; height: auto; border: 1px solid rgba(255, 80, 80, 0.3); background-color: #000; box-shadow: 0 0 10px rgba(255, 0, 0, 0.2); }

        .comment-section {
            margin-top: 10px; /* 调整间距 */
            padding-top: 20px;
            border-top: 1px solid rgba(255, 80, 80, 0.3);
            flex-grow: 1; /* 占据剩余空间 */
            /* 移除 overflow-y */
            display: flex;
            flex-direction: column;
            padding-right: 5px; /* 保留一些内边距 */
             min-height: 100px; /* 给评论区一个最小高度，避免内容少时塌陷 */
        }

        .comment-placeholder { color: #a09090; font-style: italic; text-align: center; padding: 15px; border: 1px dashed rgba(255, 80, 80, 0.3); border-radius: 4px; background-color: rgba(255, 80, 80, 0.05); margin-bottom: 20px; flex-shrink: 0; margin-right: 10px; }
        .comment-list { list-style: none; padding: 0; margin: 0; padding-right: 10px; }
        .comment-item { margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px dashed rgba(255, 80, 80, 0.15); }
        .comment-item:last-child { margin-bottom: 0; border-bottom: none; }
        .comment-user { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
        .comment-user span:first-child { color: #ff8080; font-weight: bold; font-size: 0.95em; }
        .comment-user .comment-time { color: #776666; font-size: 0.85em; }
        .comment-text { color: #c0a0a0; font-size: 0.95em; line-height: 1.7; word-wrap: break-word; white-space: pre-wrap; /* 保留评论换行 */}

        /* --- 伪造统计模块 (保持不变) --- */
        #fake-stats-widget { position: fixed; bottom: 15px; left: 15px; background-color: rgba(30, 5, 5, 0.9); color: #c0a0a0; padding: 12px 18px; border-radius: 6px; font-family: 'Courier New', Courier, monospace; font-size: 13px; line-height: 1.6; z-index: 999; box-shadow: 0 0 15px rgba(255, 0, 0, 0.3); border: 1px solid rgba(255, 80, 80, 0.3); min-width: 180px; }
        #fake-stats-widget .stats-header { font-weight: bold; color: #ff5050; margin-bottom: 8px; text-align: center; border-bottom: 1px solid rgba(255, 80, 80, 0.3); padding-bottom: 5px; }
        #fake-stats-widget .stats-item { margin-bottom: 5px; display: flex; justify-content: space-between; align-items: center; }
        #fake-stats-widget .stats-label { color: #887777; margin-right: 10px; }
        #fake-stats-widget .stats-value { font-weight: bold; color: #ff8080; display: flex; align-items: center; }
        #fake-stats-widget .sync-time { margin-top: 10px; padding-top: 5px; font-size: 11px; color: #776666; text-align: center; border-top: 1px dashed rgba(255, 80, 80, 0.3); }
        #fake-stats-widget .sync-time span { font-weight: bold; color: #aa9999; }
        .status-dot { display: inline-block; width: 10px; height: 10px; border-radius: 50%; margin-left: 8px; box-shadow: 0 0 5px; }
        .status-dot.green { background-color: #33cc33; color: #33cc33; }
        .status-dot.red { background-color: #ff3333; color: #ff3333; }
        .status-dot.yellow { background-color: #ffcc00; color: #ffcc00; }

    </style>
</head>
<body>

    <!-- 新增：诅咒文字背景容器 (保持不变) -->
    <div id="cursed-text-background"></div>

    <!-- 右上角按钮容器 (保持不变) -->
    <div class="top-right-buttons">
        <button id="announcement-button" class="top-right-button">公告</button>
        <button id="login-button" class="top-right-button">登录</button>
    </div>

    <!-- 内容容器 (保持不变) -->
    <div class="content-wrapper">
        <!-- 头部内容 (保持不变) -->
        <div class="header-content">
            <h1>舌焚錄</h1>
            <p>聯動本俱樂部旗下，揭露那些撕破臉的逆天敗類。</p>
        </div>
        <!-- 主要内容 (保持不变) -->
        <div class="main-content">
            <h2>孤魂墙</h2>
            <div class="gallery">
                <!-- 竖排红色名字 (保持不变) -->
                <div class="exposed-name" data-name="小鸢鬼">小<br>鸢<br>鬼</div>
                <div class="exposed-name" data-name="沟耳屎">沟<br>耳<br>屎</div>
                <div class="exposed-name" data-name="星狗">星<br>狗</div>
                <div class="exposed-name" data-name="专业没妈">专<br>业<br>没<br>妈</div>
            </div>
        </div>

         <!-- 页脚联系我们文字 (保持不变) -->
         <p class="contact-footer">若汝於群而受不義，握證無門，可來吾處。天道好輪迴，蒼天繞過誰。吾等為汝，伸張天道，揭穿偽善之面具，令惡者自食其果。</p>
    </div>

    <!-- 登录模态窗口 (保持不变) -->
    <div id="login-modal" class="modal modal-login">
        <div class="modal-content">
            <button class="close-modal-button" data-modal-id="login-modal">&times;</button>
            <h2>成员登录</h2>
            <form id="login-form">
                <label for="login-account-input">账户 / 邮箱</label>
                <input type="text" id="login-account-input" name="account" required placeholder="输入您的账户名或注册邮箱">
                <label for="login-password-input">密码</label>
                <input type="password" id="login-password-input" name="password" required placeholder="输入您的密码">
                <div class="error-message" id="login-error"></div>
                <div class="modal-buttons">
                    <button type="submit" class="primary" id="login-submit-button">登录</button>
                    <button type="button" class="secondary register-switch">注册</button>
                </div>
            </form>
        </div>
    </div>

    <!-- 注册模态窗口 (保持不变) -->
     <div id="register-modal" class="modal modal-register">
        <div class="modal-content">
            <button class="close-modal-button" data-modal-id="register-modal">&times;</button>
            <h2>加入我们</h2>
            <form id="register-form">
                <label for="register-account-input">注册账户 / 邮箱</label>
                <input type="text" id="register-account-input" name="account" required placeholder="用于登录和接收通知">
                <label for="register-password-input">设置密码</label>
                <input type="password" id="register-password-input" name="password" required placeholder="至少8位，包含字母和数字">
                <label for="invite-code-input">邀请码</label>
                <input type="text" id="invite-code-input" name="invite_code" required placeholder="必须提供有效的邀请码">
                <div class="error-message" id="register-error"></div>
                <div class="modal-buttons">
                    <button type="submit" class="primary" id="register-submit-button">注册</button>
                    <button type="button" class="secondary login-switch">已有账户? 登录</button>
                </div>
            </form>
        </div>
    </div>

    <!-- 公告模态窗口 (保持不变) -->
    <div id="announcement-modal" class="modal modal-announcements">
        <div class="modal-content">
            <button class="close-modal-button" data-modal-id="announcement-modal">&times;</button>
            <h2>站点公告</h2>
            <div class="announcements-list">
                <!-- 公告内容保持不变 -->
                 <div class="announcement-item"><span class="announcement-date">2025.04.01</span><p class="announcement-text">通讯协议 V3.0 已完成全面切换。旧版本接口将在未来 72 小时内停用，请成员确保浏览器兼容性。</p></div>
                 <div class="announcement-item"><span class="announcement-date">2025.02.14</span><p class="announcement-text">为进一步提升平台在高并发场景下的访问稳定性及数据同步效率，我们已完成核心节点负载均衡机制的全面优化升级。本次更新旨在通过智能流量分配与动态资源调度，确保高峰时段服务响应的流畅性与数据处理的高效性。
 <br> 同时，为应对近期发现的恶意自动化脚本滥用行为（如制造大量无效访问请求），我们已采取以下临时性防护措施：
 <br> 1.暂停“忘记密码”找回功能入口，以防止账户安全风险被自动化工具利用。
 <br> 2.暂时关闭新用户注册通道，优先保障现有用户的数据库读写稳定性。
 <br> 上述调整为阶段性安全强化措施，恢复时间将根据系统负载与安全态势动态评估。我们深知此调整可能对部分用户造成不便，但为确保核心服务器的数据库稳定性与整体服务质量，此为必要的技术保障手段。如有疑问或需紧急支持，请通过官方技术支持渠道联系我们。感谢您对平台优化工作的理解与支持。 </p></div>
                 <div class="announcement-item"><span class="announcement-date">2024.12.25</span><p class="announcement-text">年度数据归档与清理维护已完成。部分过期或非活跃记录已被封存。</p></div>
                 <div class="announcement-item"><span class="announcement-date">2024.09.30</span><p class="announcement-text">历史记录归档策略调整生效。查询接口参数略有变动，详见内部文档更新。</p></div>
                 <div class="announcement-item"><span class="announcement-date">2024.07.01</span><p class="announcement-text">成员行为准则微调 (Rev 4.1)，重点强调信息提报的准确性与时效性要求。</p></div>
                 <div class="announcement-item"><span class="announcement-date">2024.04.19</span><p class="announcement-text">紧急安全补丁 (KFS-2024-04a) 已应用，修复潜在的越权访问漏洞。</p></div>
                 <div class="announcement-item"><span class="announcement-date">2023.11.11</span><p class="announcement-text">前端界面渲染引擎优化 (Beta) 上线，初步提升部分模块加载速度。</p></div>
                 <div class="announcement-item"><span class="announcement-date">2023.07.15</span><p class="announcement-text">为进一步提升平台稳定性与数据安全性，我们计划于 世界标准时间（UTC）02:00 至 04:00 期间进行例行维护。维护窗口内，服务可能出现短暂中断，建议提前做好相关准备。

 <br> 本次维护主要内容包括：

     <br> 数据库系统升级：完成核心数据库的迁移与优化，以提升数据处理效率及容错能力。
     <br> 账户安全强化：清理并删除利用非法字段或违规操作的账户。禁止注册以下高风险或易误解的用户名：admin、administrators、root、system 等（含变体或组合形式）。
     <br> 登录异常处理：若维护后无法正常登录，建议重新注册账户。为保障账户安全，请避免使用上述敏感名称</p></div>
                 <div class="announcement-item"><span class="announcement-date">2023.05.01</span><p class="announcement-text">曝光信息提交通道完成加密强化升级，采用端到端非对称加密。</p></div>
                 <div class="announcement-item"><span class="announcement-date">2022.10.31</span><p class="announcement-text">新增 “标记失效” 功能，用于处理当事人已解决或过时的曝光条目。</p></div>
                 <div class="announcement-item"><span class="announcement-date">2022.08.20</span><p class="announcement-text">第一轮数据冗余清理周期执行完毕，释放存储空间，提升系统响应。</p></div>
                 <div class="announcement-item"><span class="announcement-date">2022.04.01</span><p class="announcement-text">引入动态验证码机制以应对自动化脚本干扰。如有登录困难请联系支持渠道。</p></div>
                 <div class="announcement-item"><span class="announcement-date">2022.01.10</span><p class="announcement-text">成员身份验证协议升级 (v1.2)，增强账户安全性。</p></div>
                 <div class="announcement-item"><span class="announcement-date">2021.09.01</span><p class="announcement-text">优化了曝光内容排序算法，优先展示近期活跃度较高的条目。</p></div>
                 <div class="announcement-item"><span class="announcement-date">2021.03.15</span><p class="announcement-text">核心系统架构初步迁移完成，为后续扩展奠定基础。</p></div>
                 <div class="announcement-item"><span class="announcement-date">2021.03.04</span><p class="announcement-text">原"无常榜"经大量举报攻击后大改革重新建立了此站，且封存远古档案，大赦天下。</p></div>
            </div>
        </div>
    </div>

    <!-- 罪证详情模态窗口 (优化后) -->
    <div id="details-modal" class="modal modal-details">
        <div class="modal-content"> <!-- 这个容器现在负责滚动 -->
            <button class="close-modal-button" data-modal-id="details-modal">&times;</button>
            <h2 id="details-title">罪证记录</h2>

            <!-- 主要罪证文本 -->
            <div class="details-content" id="details-text-content">
                <!-- 罪行文本将动态加载于此 -->
            </div>

            <!-- 联系信息显示区域 -->
            <div class="contact-info-container" id="contact-info-display" style="display: none;">
                <!-- 联系信息将动态加载于此 -->
            </div>

            <!-- 图片容器 -->
            <div class="details-image-container">
                <img id="details-image" src="" alt="罪证图片">
            </div>

            <!-- 评论区 -->
            <div class="comment-section">
                <p class="comment-placeholder">登录后可留言</p>
                <div class="comment-list" id="comment-list-display">
                    <!-- 评论将通过 JS 动态生成并插入这里 -->
                </div>
            </div>
        </div>
    </div>

    <!-- 统计部件 (保持不变) -->
     <div id="fake-stats-widget">
        <div class="stats-header">站点信息</div>
        <div class="stats-item"> <span class="stats-label">总访问量:</span> <span class="stats-value" id="total-visits-display">148.3W</span> </div>
        <div class="stats-item"> <span class="stats-label">Status:</span> <span class="stats-value" id="site-status-display"><span class="status-dot green"></span></span> </div>
        <div class="stats-item"> <span class="stats-label">当前在线:</span> <span class="stats-value" id="online-users-display">登录可见</span> </div>
        <div class="sync-time"> 同步于: <span id="last-sync-time">2025.04.04</span> </div>
     </div>

    <!-- JavaScript (已移除敏感词处理，滚动条优化通过 CSS 实现) -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // --- 伪造统计JS代码 (保持不变) ---
        const totalVisitsEl = document.getElementById('total-visits-display');
        const onlineUsersEl = document.getElementById('online-users-display');
        function updateStats() {
            totalVisitsEl.textContent = '148.3W';
            onlineUsersEl.textContent = '登录可见';
        }
        updateStats();

        // --- 曝光数据 (保持不变) ---
        const exposedData = {
            "小鸢鬼": {
                title: "孽镜台：小鸢鬼",
                crimes: "原名：星鸢 \n\nSTEAM主页：https://steamcommunity.com/id/DCS431516526 \n\n纯傻逼一个，也是个喜欢写狗屁测评来标榜自己看不起最看不起那的，曾经被爆破过STEAM主页，后面学聪明了直接全部删掉了留言关闭了留言直接洗白换个圈子依然兴风作浪。对了，浅霜事件他也有参与，看他时候啥嘴脸，一副高高在上的模样，都小心点吧，指不定哪天就被他背刺了。最后好好欣赏欣赏它的照片。为了遵守它居住地的法律，它的脸部照片解锁才可看。\n\n初步证据指向其与数起网络欺凌事件相关联，导致受害者名誉及精神受损。\n\n关联证据链：[内部索引 KFX-XIAOYG-001-E]",
                imageUrl: "https://thumbs2.imgbox.com/97/ba/rzZLYqjC_t.jpg",
                contactInfo: [
                    { label: "照片：&nbsp;", placeholderText: "登录后可见" },
                    { label: "手机号:", placeholderText: "登录后可见" },
                    { label: "居住地:", placeholderText: "登录后可见" }
                ],
                comments: [
                    { user: "猎🐎人", time: "1 小时前", text: "这货还有脸活着？浅霜那事儿就该直接线下单杀它！" },
                    { user: "匿名", time: "3 小时前", text: "看它那照片就一股子猥琐逼样，指定没少干缺德事。" },
                    { user: "蒸汽清洁工", time: "6 小时前", text: "删评控评有一手的，可惜互联网有记忆，扒的就是你这种狗杂种。" }
                ]
            },
            "沟耳屎": {
                 title: "罪证记录：沟耳屎",
                 crimes: "原名：3L-Grc \n\nSTEAM主页：https://steamcommunity.com/profiles/76561198798424533  \n\nB站UID:176543721 (虚梦3L-Grc幻) https://space.bilibili.com/176543721 \n\nWuhan, Hube人，自己写的怪猎测评像老太太大臭袜子一样没人看，发现了人家女生写的好的评测点赞和评论比它的多，所以就嫉妒了，就像条狗一样乱尿阴阳怪气找存在感，骂完一击脱离，贱不贱啊？3L-Grc你要是真懂你妈的烂逼怎么生的你就不会天天打飞机把脑子射没了，用个小破笔记本天天在那挂机崛起的云玩家，连成就都是用工具解锁的为什么总喜欢跳人脸上装什么逼啊，挂不起荒野和世界，只敢挂登陆ns的崛起，付不起电费了都还要最后装一次逼才去死，你妈的烂逼还不够你用的吗？草泥马的天天玩黄油打飞机没人理就来我们这硬蹭，能蹭你妈了隔壁呢，没实力又想蹭是这样的，纯小丑🤡https://imgbox.com/Txot5rtR,https://imgbox.com/o8zXAE6o,https://imgbox.com/RjDclr97,https://imgbox.com/xUQYFgLk,https://imgbox.com/9fjEQ2ge,https://imgbox.com/3Qk3WggI, \n\n关联证据链：[内部索引 KFX-GOUES-001-P]",
	                 imageUrl: "https://thumbs2.imgbox.com/4d/26/3Qk3WggI_t.jpg",
	                 contactInfo: [
	                    { label: "QQ：", placeholderText: "登录后可见" },
	                    { label: "手机号:", placeholderText: "登录后可见" },
	                    { label: "居住地:", placeholderText: "登录后可见" }
	                 ],
	                 comments: [
	                     { user: "怪猎警察", time: "尼玛", text: "云玩家还爱指点江山？自己水平不行就急眼咬人，真是丢尽猎人的脸！" },
	                     { user: "Wuhan Reject", time: "4 小时前", text: "我们武汉不认这种货色，赶紧滚出克！别给我们抹黑！" },
	                     { user: "技术宅", time: "7 小时前", text: "SAM解锁成就还行，没点逼数的东西，迟早被人开盒。" },
	                     { user: "烈马人", time: "7 小时前", text: "SAM解锁成就还行，没点逼数的东西，迟早被人开盒。" }
	                 ]
	            },
            "星狗": {
                 title: "罪证记录：星狗",
                 crimes: "喜欢用*号作为它名字的傻逼，大脑就键盘上的*那么大，这个傻逼进外群找事，乱咬群友，阴阳管理人员，还标榜自己组内战贡献大，经查询STEAM组内无此人，内战也没有目击者证明，后狗急跳墙涉及利用平台漏洞进行非法操作、传播被严格管制的内部文件插件。\n\n技术分析确认其曾尝试利用黑产等手段攻击本站及关联站点服务器，试图窃取或篡改数据，虽未成功突破核心防御，但已构成明确威胁。就是个傻逼。\n\n关联证据链：[内部索引 KFX-XINGG-001-T]",
                 imageUrl: "https://thumbs2.imgbox.com/4b/01/DIZnikt6_t.jpg",
                 contactInfo: [
                     { label: "QQ：", placeholderText: "459403046" },
                     { label: "手机号:", placeholderText: "登录后可见" },
                     { label: "精彩视频:", placeholderText: "登录后可见" }
                 ],
                 comments: [
                     { user: "反黑急先锋", time: "2023.3.4", text: "搞黑产攻击网站？这种人就该直接报警抓起来枪毙！" },
                     { user: "群聊受害者", time: "2023.1.6", text: "就是它！上次在XX群里像疯狗一样咬人，原来是个只会搞小动作的垃圾。" },
                     { user: "吃瓜群众", time: "2023.1.2", text: "贡献大？我看是吹牛逼贡献大吧？笑拉了。" },	
                     { user: "吃瓜群众", time: "2023.1.2", text: "贡献大？我看是吹牛逼贡献大吧？笑拉了。" },
                 ]
            },
            "专业没妈": {
                 title: "罪证记录：专业没妈",
                 crimes: "纯TM小学生，山沟沟里的，给广大农村人丢脸，这个昵称为 “专业白给” 的没妈的玩意。作为一个毫无贡献的路人在我们的求生之路分部服务器里玩，M2 开局它自己那个喷子单防不住不看队友站位打的很脑残却还自以为打得很好的同时还不停压力队友，然后它用那黄豆般的脑子给出的低能的指挥，如果队友没有完全按照它说的做，它就会阴阳怪气，或者骂人，在他的不停压力阴阳和乱指挥下，明明一个本该放松合作的游戏就被这一个搅屎棍搞得全无，管理和它讲道理无果后 “专业白给” 它倒反天罡！不知道的还以为是他的服务器他当皇帝呢！让组里大家都认识了它这个本来不知名的小垃圾真是丢国人的脸。扒出来是个留守儿童，作孽啊，你爷爷奶奶辛辛苦苦养着你是让你去到处沾花惹草到处骂人的？\n\n关联证据链：[内部索引 KFX-ZYMM-001-V]",
                 imageUrl: "https://thumbs2.imgbox.com/df/39/gHlEp9kP_t.png",
                 contactInfo: [
                     { label: "QQ:", placeholderText: "登录后可见" },
                     { label: "手机号:", placeholderText: "登录后可见" },
                     { label: "居住地:", placeholderText: "登录后可见" }
                 ],
                 comments: [
                    { user: "L4D老兵", time: "2 小时前", text: "这种压力怪最恶心了，自己菜得抠脚还怪队友，赶紧滚回去玩泥巴吧。" },
                    { user: "乡村振兴办", time: "4 小时前", text: "我们农村不背这锅！家教不好怪社会？赶紧让你爷奶领回去拴好！" },
                    { user: "服务器管理员", time: "9 小时前", text: "这傻逼还敢反咬管理？脑子确实只有黄豆大，建议remake。" }
                 ]
            }
         };

        // --- 模态窗口元素引用 (保持不变) ---
        const loginButton = document.getElementById('login-button'); const announcementButton = document.getElementById('announcement-button'); const loginModal = document.getElementById('login-modal'); const registerModal = document.getElementById('register-modal'); const announcementModal = document.getElementById('announcement-modal'); const detailsModal = document.getElementById('details-modal'); const loginErrorEl = document.getElementById('login-error'); const registerErrorEl = document.getElementById('register-error'); const loginForm = document.getElementById('login-form'); const registerForm = document.getElementById('register-form'); const loginSubmitButton = document.getElementById('login-submit-button'); const registerSubmitButton = document.getElementById('register-submit-button'); const detailsTitleEl = document.getElementById('details-title'); const detailsTextEl = document.getElementById('details-text-content'); const detailsImageEl = document.getElementById('details-image');
        const contactInfoDisplay = document.getElementById('contact-info-display');
        const commentListDisplay = document.getElementById('comment-list-display');

        // --- 函数：打开/关闭模态框, 显示/隐藏错误, 计算随机延迟 (保持不变) ---
        function openModal(modalId) {
            const modalElement = document.getElementById(modalId);
            if (!modalElement) return;
            if (loginErrorEl) hideError(loginErrorEl); if (registerErrorEl) hideError(registerErrorEl);
            if (loginSubmitButton) { loginSubmitButton.disabled = false; loginSubmitButton.classList.remove('loading'); }
            if (registerSubmitButton) { registerSubmitButton.disabled = false; registerSubmitButton.classList.remove('loading'); }
            modalElement.style.display = 'flex';

            // 确保打开详情或公告模态框时滚动条在顶部
            if (modalId === 'details-modal' || modalId === 'announcement-modal') {
                const contentElement = modalElement.querySelector('.modal-content, .announcements-list'); // 获取需要滚动的元素
                 if (contentElement) {
                      contentElement.scrollTop = 0;
                 }
            }
        }
        function closeModal(modalId) { const modalElement = document.getElementById(modalId); if (modalElement) { modalElement.style.display = 'none'; } }
        function showError(element, message) { element.textContent = message; element.style.display = 'block'; } function hideError(element) { element.textContent = ''; element.style.display = 'none'; }
        function getRandomDelay(minSeconds, maxSeconds) { return (Math.random() * (maxSeconds - minSeconds) + minSeconds) * 1000; }

        // --- 换行处理函数 ---
        function formatNewlines(text) {
            return text ? text.replace(/\n/g, '<br>') : '';
        }

        // --- 事件监听器设置 (移除敏感词处理调用, 其他保持不变) ---
        loginButton.addEventListener('click', () => openModal('login-modal'));
        announcementButton.addEventListener('click', () => openModal('announcement-modal'));

        document.querySelectorAll('.close-modal-button').forEach(button => {
             button.addEventListener('click', () => {
                 const modalId = button.getAttribute('data-modal-id');
                 if (modalId) {
                     closeModal(modalId);
                 } else { // Fallback for potentially missing attribute
                     const modal = button.closest('.modal');
                     if (modal) modal.style.display = 'none';
                 }
             });
        });

        document.querySelectorAll('.modal').forEach(modal => {
             // 点击模态框背景关闭
             modal.addEventListener('click', (event) => {
                 if (event.target === modal) {
                     closeModal(modal.id);
                 }
             });
             // 阻止点击内容区域关闭模态框
             const content = modal.querySelector('.modal-content');
             if (content) {
                 content.addEventListener('click', (event) => event.stopPropagation());
             }
        });

        document.querySelectorAll('.register-switch').forEach(button => {
             button.addEventListener('click', () => { closeModal('login-modal'); openModal('register-modal'); });
        });
        document.querySelectorAll('.login-switch').forEach(button => {
             button.addEventListener('click', () => { closeModal('register-modal'); openModal('login-modal'); });
        });

        loginForm.addEventListener('submit', (event) => {
             event.preventDefault();
             hideError(loginErrorEl);
             loginSubmitButton.disabled = true;
             loginSubmitButton.classList.add('loading');
             const delay = getRandomDelay(1.5, 3);
             setTimeout(() => {
                 showError(loginErrorEl, '认证失败：账户凭据无效或已被吊销。');
                 loginSubmitButton.disabled = false;
                 loginSubmitButton.classList.remove('loading');
             }, delay);
        });

        registerForm.addEventListener('submit', (event) => {
             event.preventDefault();
             hideError(registerErrorEl);
             const inviteCodeInput = document.getElementById('invite-code-input');
             const inviteCode = inviteCodeInput.value.trim();
             if (!inviteCode) {
                 showError(registerErrorEl, '必须提供有效的邀请码以完成注册。');
                 inviteCodeInput.focus();
             } else {
                 registerSubmitButton.disabled = true;
                 registerSubmitButton.classList.add('loading');
                 const delay = getRandomDelay(2, 4);
                 setTimeout(() => {
                     showError(registerErrorEl, '无效邀请码。请核实。');
                     registerSubmitButton.disabled = false;
                     registerSubmitButton.classList.remove('loading');
                 }, delay);
             }
        });

        document.querySelectorAll('.exposed-name').forEach(nameElement => {
             nameElement.addEventListener('click', () => {
                 const nameKey = nameElement.getAttribute('data-name');
                 const data = exposedData[nameKey];

                 if (data && detailsModal && detailsTitleEl && detailsTextEl && detailsImageEl && contactInfoDisplay && commentListDisplay) {
                     detailsTitleEl.textContent = data.title || '罪证记录';
                     detailsTextEl.innerHTML = formatNewlines(data.crimes || '暂无详细记录。'); // 仅处理换行
                     detailsImageEl.src = data.imageUrl || '';
                     detailsImageEl.alt = `关于 ${nameKey} 的罪证图片`;

                     // 处理联系信息数组
                     contactInfoDisplay.innerHTML = '';
                     if (Array.isArray(data.contactInfo) && data.contactInfo.length > 0) {
                         let contactHtml = '';
                         data.contactInfo.forEach(info => {
                             if (info.label && info.placeholderText) {
                                 contactHtml += `
                                     <div class="contact-info-line">
                                         <span class="contact-info-label">${info.label}</span>
                                         <span class="blurred-login-required" data-hover-text="${info.placeholderText}"></span>
                                     </div>
                                 `;
                             }
                         });
                         contactInfoDisplay.innerHTML = contactHtml;
                         contactInfoDisplay.style.display = 'block';
                     } else {
                         contactInfoDisplay.style.display = 'none';
                     }

                     // 处理独立评论区
                     commentListDisplay.innerHTML = ''; // 清空现有评论
                     if (Array.isArray(data.comments) && data.comments.length > 0) {
                         let commentsHtml = '';
                         data.comments.forEach(comment => {
                             if (comment.user && comment.time && comment.text) {
                                 const processedCommentText = formatNewlines(comment.text); // 仅处理评论换行
                                 commentsHtml += `
                                     <div class="comment-item">
                                         <div class="comment-user">
                                             <span>${comment.user}</span>
                                             <span class="comment-time">${comment.time}</span>
                                         </div>
                                         <div class="comment-text">${processedCommentText}</div>
                                     </div>
                                 `;
                             }
                         });
                         commentListDisplay.innerHTML = commentsHtml;
                     } else {
                         // 如果没评论，comment-placeholder 会显示
                     }

                     openModal('details-modal');
                 } else {
                     console.error('无法加载详情：缺少数据或模态框元素。 Name Key:', nameKey);
                 }
             });
        });

        // --- 背景诅咒文字生成 (保持不变) ---
        const cursedTextContainer = document.getElementById('cursed-text-background');
        const curses = ['怨念不散', '魂兮歸來', '不得超生', '永墮地獄', '血債血償', '因果循環', '報應不爽', '死死死死', '咒怨纏身', '萬劫不復', '厲鬼索命', '六道輪迴', '無間煉獄', '惡靈詛咒', '黃泉路近', '業火焚身', '墮入畜道', '噬汝魂魄'];
        const numberOfCurses = 35;
        if (cursedTextContainer) { for (let i = 0; i < numberOfCurses; i++) { const span = document.createElement('span'); span.classList.add('cursed-text'); span.textContent = curses[Math.floor(Math.random() * curses.length)]; const randomTop = Math.random() * 100; const randomLeft = Math.random() * 100; span.style.top = `${randomTop}vh`; span.style.left = `${randomLeft}vw`; const randomFontSize = Math.random() * 12 + 14; span.style.fontSize = `${randomFontSize}px`; const randomDelayFlicker = Math.random() * 5; const randomDelayDrift = Math.random() * 10; span.style.animationDelay = `${randomDelayFlicker}s, ${randomDelayDrift}s`; cursedTextContainer.appendChild(span); } }

    });
    </script>

</body>
</html>
